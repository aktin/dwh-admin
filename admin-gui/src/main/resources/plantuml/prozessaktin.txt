@startuml

actor "Forscher" as F
actor "Review Board" as RB
participant "Search Broker" as SB
actor "Notaufnahme 1" as NA1
actor "Notaufnahme 2" as NA2
participant "Data Aggregator" as DA
actor "Auswertungsstelle" as A

'activate F
'activate RB
'activate NA1
'activate NA2
'activate A

F->>RB : Forschungsvorhaben
note right of RB
	Prüft Forschungsvorhaben,
	erzeugt Ticketnummer
	und Abfrage-ID
end note
RB->>F : Ticketnummer

RB->>DA : Anfrage-ID & Ticketnummer
activate DA
RB->>SB : Anfrage-ID & Anfragebeschreibung
activate SB #yellow
note right of SB
	Erstellung formaler
	Abfragesyntax
end note

SB->NA1 : Verteilung der Abfrage
SB->NA2
deactivate SB

note right of NA1: Freigabe
NA1->DA : Abfrageergebnis
note right of NA2: Freigabe
NA2->DA : Abfrageergebnis

note right of DA: Datensammlung\nfür Abfrage-ID

F->DA : Statusabfrage
activate DA #red
DA->F : Status
deactivate DA

F->DA : Ende der Sammlung
DA->A : Datenübermittlung
deactivate DA

note right of A : Statistische\nAnalyse
A->F : Beantwortung\nFragestellung

'deactivate F
'deactivate RB
'deactivate NA1
'deactivate NA2
'deactivate A

@enduml